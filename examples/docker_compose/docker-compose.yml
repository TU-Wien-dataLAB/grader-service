version: '3.1'
name: 'grader'
services:

  service:
    build:
      context: ../..
      dockerfile: examples/docker_compose/Dockerfile-Service
    volumes:
      - ./grader_service_config.py:/app/grader_service_config.py
      - ./data:/data
    network_mode: "host"
    ports: 
    - "4010:4010"

  hub:
    build:
      context: ../..
      dockerfile: examples/docker_compose/Dockerfile-Hub
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./jupyterhub_config.py:/app/jupyterhub_config.py
      - ./data-hub:/data
    network_mode: "host"
    ports: 
    - "8080:8080"